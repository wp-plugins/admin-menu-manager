/*! Admin Menu Manager - v1.0.3
 * http://required.ch
 * Copyright (c) 2015; * Licensed GPLv2+ */

!function(a){"use strict";a(function(){function b(b,c){var d,e,f,g=c.item.find("a").attr("href"),h=c.item.index(),i=c.item.is(".wp-menu-separator"),j=c.item.attr("data-amm-separator"),k=[c.item.index()];if(c.item.parent(".wp-submenu").length>0){h=h>0?--h:0;var l=a("#adminmenu > li").index(c.item.parents("li"));k=[l,h]}c.item.index()>0&&c.item.removeClass("wp-first-item"),_.find(AdminMenuManager.adminMenu,function(a,b){var c=a[2]&&g&&a[2]===g;return!c&&-1===a[2].indexOf(".")&&a[2]&&g&&(c="admin.php?page="+a[2]===g),c||i&&"wp-menu-separator"===a[4]&&a[2]===j?(e=[b],!0):void _.find(a[7],function(a,c){var d=a[2]&&g&&a[2]===g;return!d&&-1===a[2].indexOf(".")&&a[2]&&g&&(d="admin.php?page="+a[2]===g||this.parent[2]+"?page="+a[2]===g),d||i&&"wp-menu-separator"===a[4]&&a[2]===j?(e=[b,c],!0):void 0},{parent:a})}),e&&(f=AdminMenuManager.adminMenu[e[0]][6],1===e.length?(d=AdminMenuManager.adminMenu[e[0]],AdminMenuManager.adminMenu.splice(e[0],1)):2===e.length&&(d=AdminMenuManager.adminMenu[e[0]][7][e[1]],AdminMenuManager.adminMenu[e[0]][7].splice(e[1],1))),1===k.length?(i||(d[4]="menu-top"),d[5]=d[5]?d[5]:e?AdminMenuManager.adminMenu[e[0]][5]:"",d[6]=f?f:"dashicons-admin-generic",AdminMenuManager.adminMenu.splice(k[0],0,d)):2===k.length&&(d[4]="",AdminMenuManager.adminMenu[k[0]][7].length>0?AdminMenuManager.adminMenu[k[0]][7].splice(k[1],0,d):AdminMenuManager.adminMenu[k[0]][7].push(d)),c.item.parent("#adminmenu").length>0?i||(c.item.attr("data-amm-parent")?(c.item.addClass("menu-top"),c.item.find("a").addClass("menu-top")):c.item.removeClass().addClass(c.item.attr("data-amm-class")).addClass("ui-sortable-handle"),c.item.addClass(d[5]),c.item.find(".amm-wp-menu-name").removeClass("amm-wp-menu-name").addClass("wp-menu-name"),0===c.item.find("a div").length&&(c.item.find("a").wrapInner('<div class="wp-menu-name"></div>'),c.item.find("a").prepend(d[6].indexOf("dashicons")>-1?'<div class="wp-menu-image dashicons-before '+d[6]+'"><br></div>':d[6].indexOf("image/svg")>-1||d[6].indexOf("http")>-1?'<div class="wp-menu-image svg" style="background-image:url('+d[6]+') !important;"><br></div>':"div"===d[6]||"none"===d[6]?'<div class="wp-menu-image dashicons-before"><br></div>':'<div class="wp-menu-image dashicons-before dashicons-admin-generic"><br></div>')),c.item.find(".wp-menu-arrow").removeClass("hidden"),c.item.find(".wp-menu-image").removeClass("hidden"),c.item.find(".wp-submenu").removeClass("hidden")):(c.item.removeClass("menu-top").removeClass(c.item.attr("class").match(/toplevel_[\w-]*\b/)),c.item.find(".menu-top").removeClass("menu-top"),c.item.find(".wp-menu-arrow").addClass("hidden"),c.item.find(".wp-menu-image").addClass("hidden"),c.item.find(".wp-submenu").addClass("hidden"),c.item.find(".wp-menu-name").length>0&&c.item.find(".wp-menu-name").removeClass("wp-menu-name").addClass("amm-wp-menu-name"))}var c=!1;a("#admin-menu-manager-edit").click(function(d){d.preventDefault();var e=a(this).find(".menu-top"),f=a(this).find(".wp-menu-name"),g=a(this).find(".wp-menu-image");if(c=!c,c?_.each(a("#adminmenu > .menu-top:not(.wp-has-submenu)"),function(b){var c=a(b);c.addClass("wp-has-submenu"),c.hasClass("current")&&c.addClass("wp-has-current-submenu"),c.append('<ul class="wp-submenu wp-submenu-wrap"><li class="wp-submenu-head">'+a(b).find(".wp-menu-name").html()+"</li></ul>")}):_.each(a("#adminmenu > .menu-top.wp-has-submenu"),function(b){var c=a(b);c.find("li").length<=1&&c.removeClass("wp-has-current-submenu wp-has-submenu")}),a("#adminmenuwrap ul").sortable({disabled:!c,cancel:"#admin-menu-manager-edit, #collapse-menu",connectWith:"#adminmenuwrap ul",create:function(b,c){var d=0;_.each(a("#adminmenu li:not(.wp-submenu-head)"),function(b,c){var e=a(b);e.attr("data-amm-class",e.attr("class")),e.attr("data-amm-index",e.index()),e.parent(".wp-submenu").length>0&&(e.attr("data-amm-parent",e.parents("li").find("a").attr("href")),e.attr("data-amm-index",e.index()-1)),e.hasClass("wp-menu-separator")&&e.attr("data-amm-separator","separator"+ ++d)}),a("[data-amm-separator=separator"+d+"]").attr("data-amm-separator","separator-last")},update:b,beforeStop:function(a,b){},change:function(b,c){var d=a("#admin-menu-manager-edit, #collapse-menu",this).detach();a(this).append(d)}}),c)g.removeClass("dashicons-edit").addClass("dashicons-yes"),f.text(AdminMenuManager.buttonSave),e.attr("title",AdminMenuManager.buttonSave);else{var h={action:"amm_update_menu",adminMenu:AdminMenuManager.adminMenu};a.post(ajaxurl,h,function(){g.removeClass("dashicons-yes").addClass("dashicons-edit"),f.text(AdminMenuManager.buttonSaving).fadeOut(1e3,function(){a(this).text(AdminMenuManager.buttonSaved).fadeIn().delay(1e3).fadeOut(50,function(){a(this).text(AdminMenuManager.buttonEdit).fadeIn(50)})})})}})})}(jQuery);
//# sourceMappingURL=admin-menu-manager.min.js.map